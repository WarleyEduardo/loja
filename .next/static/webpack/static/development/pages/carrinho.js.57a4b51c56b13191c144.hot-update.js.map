{"version":3,"file":"static/webpack/static\\development\\pages\\carrinho.js.57a4b51c56b13191c144.hot-update.js","sources":["webpack:///./redux/actions/checkoutActions.js","webpack:///./redux/types.js"],"sourcesContent":["/*modulo 49 - integração checkout - desenvolvendo o container dos dados do cliente */\r\n\r\nimport { SET_FORM, CLEAN_FORM, SET_TIPO_PAGAMENTO, FETCH_SESSION_ID, FETCH_SENDER_HASH, PAGAR_PEDIDO , NOVO_PEDIDO } from '../types';\r\n\r\n/* módulo 49 -  Dados de pagamento - preparando a base, actions e  funções do pagseguro */\r\nimport axios from 'axios';\r\nimport { url , loja } from '../../config'\r\n\r\nimport { getCart } from '../../utils/cart';\r\n\r\nimport { getHeaders } from './helpers';\r\n\r\n/*modulo 49 - Botão final de checkout -  preprando base , actions e reducers */\r\n\r\nimport errorHandling from './errorHandling';\r\n\r\nimport Router from 'next/router';\r\nimport { cleanCarrinho } from './carrinhoActions';\r\n\r\nexport const novoPedido = (form, freteSelecionado, tipoPagamentoSelecionado,\r\n valorTotal, token, senderHash, carrinho = getCart() , cb = null\r\n\r\n) => dispatch => {\r\n\r\n\taxios.post(\r\n\t\t`${url}/api/pedidos/loja${loja}`,\r\n\t\t{\r\n\t\t\tcarrinho,\r\n\t\t\tentrega: {\r\n\t\t\t\tcusto: freteSelecionado.Valor.replace(',', '.'),\r\n\t\t\t\ttipo: freteSelecionado.Codigo.toString(),\r\n\t\t\t\tprazo: freteSelecionado.prazoEntrega,\r\n\t\t\t\tendereco: {\r\n\t\t\t\t\tlocal: form.local,\r\n\t\t\t\t\tnumero: form.numero,\r\n\t\t\t\t\tcomplemento: form.complemento,\r\n\t\t\t\t\tbairro: form.bairro,\r\n\t\t\t\t\tcidade: form.cidade,\r\n\t\t\t\t\testado: form.estado,\r\n\t\t\t\t\tCEP: form.CEP,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tpagamento: {\r\n\t\t\t\tvalor: tipoPagamentoSelecionado === 'cartao' ? form.parcelasCartaoSelecionada.totalAmount : valorTotal,\r\n\t\t\t\tforma: tipoPagamentoSelecionado === 'cartao' ? 'creditCard' : 'boleto',\r\n\t\t\t\tparcelas: tipoPagamentoSelecionado === 'cartao' ? form.parcelasCartaoSelecionada.quantity : 1,\r\n\t\t\t\tenderecoEntregaIgualCobranca: form.enderecoEntregaIgualCobranca,\r\n\t\t\t\tendereco: {\r\n\t\t\t\t\tlocal: form.enderecoEntregaIgualCobranca ? form.local : form.dadosCobranca.local,\r\n\t\t\t\t\tnumero: form.enderecoEntregaIgualCobranca ? form.numero : form.dadosCobranca.numero,\r\n\t\t\t\t\tcomplemento: form.enderecoEntregaIgualCobranca ? form.complemento : form.dadosCobranca.complemento,\r\n\t\t\t\t\tbairro: form.enderecoEntregaIgualCobranca ? form.bairro : form.dadosCobranca.bairro,\r\n\t\t\t\t\tcidade: form.enderecoEntregaIgualCobranca ? form.cidade : form.dadosCobranca.cidade,\r\n\t\t\t\t\testado: form.enderecoEntregaIgualCobranca ? form.estado : form.dadosCobranca.estado,\r\n\t\t\t\t\tCEP: form.enderecoEntregaIgualCobranca ? form.CEP : form.dadosCobranca.CEP,\r\n\t\t\t\t},\r\n\t\t\t\tcartao: tipoPagamentoSelecionado === \"cartao\" ? {\r\n\r\n\t\t\t\t\tnomeCompleto: form.nomeCartao.trim(),\r\n\t\t\t\t\tcodigoArea: form.telefone.slice(0, 2),\r\n\t\t\t\t\ttelefone: form.telefone.slice(2).trim(),\r\n\t\t\t\t\tdataDeNascimento: form.dataDeNascimento,\r\n\t\t\t\t\tcredit_card_token: form.credit_card_token,\r\n\t\t\t\t\tcpf: form.cpf\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t} : undefined\r\n\t\t\t},\r\n\r\n\t\t},\r\n\t\tgetHeaders(token)\r\n\t).then(response => {\r\n\r\n\t\tdispatch({ type: NOVO_PEDIDO, payload: response.data });\r\n\t\tdispatch(pagarPedido(response.data.pedido.pagamento._id, token, senderHash));\r\n\t\tcb(null);\r\n\r\n\t}).catch(e => cb(errorHandling(e)))\r\n\r\n\r\n}\r\n\r\nexport const cleanForm = () => ({ type: CLEAN_FORM })\r\n\r\nexport const setTipoPagamento = (tipoPagamentoSelecionado) => ({\r\n\r\n\ttype: SET_TIPO_PAGAMENTO, tipoPagamentoSelecionado\r\n});\r\n\r\nexport const getSessionPagamento = () => dispatch => {\r\n\t\r\n\taxios.get(`${url}/api/pagamentos/session`).then((response) => {\r\n\r\n\t\tdispatch({ type: FETCH_SESSION_ID, payload: response.data });\r\n\r\n\t\tPagSeguroDirectPayment.setSessionId(response.data.sessionId);\r\n\r\n\t\tlet senderHash = PagSeguroDirectPayment.getSenderHash();\r\n\t\t/*\r\n\t\tPagSeguroDirectPayment.onSenderHashReady((response) => {\r\n\t\t\tif (response.status == 'error') {\r\n\t\t\t\tconsole.log(response.message);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t console.log(response.senderHash);\r\n\t\t\t\r\n\t\t}\r\n\t\t);\r\n\t\t*/\r\n\t\t\r\n\t\tdispatch({ type: FETCH_SENDER_HASH, senderHash });\r\n\t}).catch( e => console.log(e)) \t\r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport const setForm = (payload, prefix) => dispatch => {\r\n\r\n\tdispatch({ type: SET_FORM, payload, prefix });\r\n\r\n\treturn Promise.resolve();\r\n};\r\n\r\n\r\nexport const pagarPedido = (id, token, senderHash) => dispatch => {\r\n\t\r\n\taxios.post(`${url}/api/pagamentos/pagar/${id}?loja=${loja}`), {\r\n\r\n\t\tsenderHash\r\n\t}, getHeaders(token)\r\n\t\t.then(response => {\r\n\t\t\r\n\t\t\tdispatch({ type: PAGAR_PEDIDO, payload: response.data });\r\n\t\t\tRouter.push('/sucesso');\r\n\t\t\tdispatch(cleanCarrinho());\r\n\t\t\tdispatch(cleanForm());\r\n\r\n\t}).catch( e => console.log(e))\r\n}\r\n\r\nexport default {\r\n\tsetForm,\r\n\tgetSessionPagamento,\r\n\tsetTipoPagamento,\r\n\tcleanForm,\r\n\tnovoPedido,\r\n\tpagarPedido\r\n};","/* modulo 40 - loja virtual - criando helper para inicialização*/\r\n\r\n/* modulo 45 - Criando actions e reduces e atualizando os componentes das categorias*/\r\n\r\n/*modulo 46 - adicionando actions e reducers e alterando os componentes para integração*/\r\n\r\n/* modulo 47 -  integração -  detalhes do produto */\r\n\r\n/*modulo 49 - Criando as funções e error handlign para os dados do cliente 2/2*/\r\n\r\n/*modulo 49 - integração checkout - desenvolvendo o container dos dados do cliente */\r\n\r\n/* módulo 49 -  Dados de pagamento - preparando a base, actions e  funções do pagseguro */\r\n\r\n/*modulo 49 - Botão final de checkout -  preprando base , actions e reducers */\r\n\r\nexport const REGISTER = 'REGISTER',\r\n\tAUTENTICAR_TOKEN = 'AUTENTICAR_TOKEN',\r\n\tFETCH_CATEGORIAS = 'FETCH_CATEGORIAS',\r\n\tFETCH_LOJA = 'FETCH_LOJA',\r\n\tFETCH_PRODUTOS = 'FETCH_PRODUTOS',\r\n\tFETCH_CATEGORIA = 'FETCH_CATEGORIA',\r\n\tFETCH_PRODUTOS_CATEGORIA = 'FETCH_PRODUTOS_CATEGORIA',\r\n\tUSER = 'USER',\r\n\tFETCH_PESQUISA = 'FETCH_PESQUISA',\r\n\tFETCH_PRODUTOS_PESQUISA = 'FETCH_PRODUTOS_PESQUISA',\r\n\tFETCH_PRODUTO = 'FETCH_PRODUTO',\r\n\tFETCH_PRODUTO_VARIACOES = 'FETCH_PRODUTO_VARIACOES',\r\n\tFETCH_PRODUTO_AVALIACOES = 'FETCH_PRODUTO_AVALIACOES',\r\n\tNOVA_AVALIACAO = 'NOVA_AVALIACAO',\r\n\tSET_CARRINHO = 'SET_CARRINHO',\r\n\tCLEAN_CARRINHO = 'CLEAN_CARRINHO',\r\n\tFETCH_PRODUTO_CARRINHO = 'FETCH_PRODUTO_CARRINHO',\r\n\tFETCH_VARIACAO_CARRINHO = 'FETCH_VARIACAO_CARRINHO',\r\n\tFETCH_VALOR_ENTREGA = 'FETCH_VALOR_ENTREGA',\r\n\tUPDATE_QTD_CART = 'UPDATE_QTD_CART',\r\n\tREMOVE_PRODUTO_CART = 'REMOVE_PRODUTO_CART',\r\n\tCLEAN_FRETES = 'CLEAN_FRETES',\r\n\tUPDATE_FRETE_CART = 'UPDATE_FRETE_CART',\r\n\tAUTENTICAR = 'AUTENTICAR',\r\n\tFETCH_CLIENTE = 'FETCH_CLIENTE',\r\n\tSET_FORM = 'SET_FORM',\r\n\tCLEAN_FORM = 'CLEAN_FORM',\r\n\tSET_TIPO_PAGAMENTO = 'SET_TIPO_PAGAMENTO',\r\n\tFETCH_SESSION_ID = 'FETCH_SESSION_ID',\r\n\tFETCH_SENDER_HASH = 'FETCH_SENDER_HASH',\r\n\tNOVO_PEDIDO = 'NOVO_PEDIDO',\r\n\tPAGAR_PEDIDO = 'PAGAR_PEDIDO';\r\n\r\n\t\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AAIA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AAIA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAAA;AAAA;AAGA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAEA;AAAA;AACA;AAAA;AAEA;AAAA;AAEA;AAEA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAKA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAGA;AAAA;AAEA;AAEA;AACA;AAGA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}