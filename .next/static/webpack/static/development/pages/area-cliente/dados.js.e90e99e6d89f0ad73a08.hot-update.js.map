{"version":3,"file":"static/webpack/static\\development\\pages\\area-cliente\\dados.js.e90e99e6d89f0ad73a08.hot-update.js","sources":["webpack:///./containers/AreaDoCliente/Dados/FormularioDados.js"],"sourcesContent":["/* modulo 43 - Area do cliente -  dados do cliente e senha - \r\n  criando  a pagina, componentes e todos o estilo final 1/3\r\n*/\r\n\r\nimport React, { Component } from 'react';\r\n\r\nimport FormSimples from '../../../components/Inputs/FormSimples';\r\nimport TextoDados from '../../../components/Texto/Dados';\r\n\r\nimport { ESTADOS } from '../../../utils';\r\n\r\n\r\n/* Meus dados - realizando a integração 1/2 */\r\n\r\n/* Meus dados - realizando a integração 2/2 */\r\n\r\nimport { connect } from 'react-redux';\r\n\r\nimport actions from '../../../redux/actions'\r\nimport AlertGeral from '../../../components/Alert/Geral';\r\nimport { validateCPF } from '../../../utils/validade';\r\nimport {\r\n\tformatCEP, formatCPF, formatDataDeNascimento,\r\n\tformatNumber, formatTelefone\r\n} from '../../../utils/format';\r\n\r\nimport moment from 'moment';\r\n\r\nclass FormularioDados extends Component {\r\n\tstate = {\r\n\t\tnome: '',\r\n\t\tcpf: '',\r\n\t\ttelefone: '',\r\n\t\tdataDeNascimento: '',\r\n\t\tlocal: '',\r\n\t\tnumero: '',\r\n\t\tcomplemento: '',\r\n\t\tbairro: '',\r\n\t\tcidade: '',\r\n\t\testado: '',\r\n\t\tCEP: '',\r\n\t\taviso: null,\r\n\t\terros: {},\r\n\t};\r\n\r\n\tupdateState = (cliente) => {\r\n\t\tthis.setState({\r\n\t\t\tnome: cliente.nome,\r\n\t\t\tcpf: cliente.cpf,\r\n\t\t\ttelefone: cliente.telefones[0],\r\n\t\t\tdataDeNascimento: moment(cliente.dataDeNascimento).format('DD/MM/YYYY'),\r\n\t\t\tlocal: cliente.endereco.local,\r\n\t\t\tnumero: cliente.endereco.numero,\r\n\t\t\tcomplemento: cliente.endereco.complemento || '',\r\n\t\t\tbairro: cliente.endereco.bairro,\r\n\t\t\tcidade: cliente.endereco.cidade,\r\n\t\t\testado: cliente.endereco.estado,\r\n\t\t\tCEP: cliente.endereco.CEP,\r\n\t\t});\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.cliente) this.updateState(this.props.cliente);\r\n\t\t\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif ((!prevProps.cliente && this.props.cliente) || (prevProps.cliente && this.props.cliente &&\r\n\t\t\tprevProps.cliente.updatedAt !== this.props.cliente.updatedAt))\r\n\t\t\tthis.updateState(this.props.cliente);\r\n\t\t\r\n\t   \r\n\t}\r\n\r\n\tvalidate() {\r\n\r\n\t\tconst { nome, cpf, telefone, dataDeNascimento, local,\r\n\t\t\tnumero, bairro, cidade, estado, CEP } = this.state;\r\n\r\n\t\t\t\tconst erros = {};\r\n\r\n\t\t\t\r\n\t\t\t\tif (!nome) erros.nome = 'Informe aqui o nome';\r\n\t\t\t\tif (!cpf || cpf.length !== 14) erros.cpf = 'Informe aqui o cpf';\r\n\t\t\t\tif (cpf && cpf.length === 14 && !validateCPF(cpf)) erros.cpf = 'Informe aqui o cpf corretamente';\r\n\r\n\t\t\t\tif (!telefone || telefone.length < 11) erros.telefone = 'Informe aqui o telefone';\r\n\t\t\t\tif (!dataDeNascimento || dataDeNascimento.length !== 10) erros.dataDeNascimento = 'Informe aqui a data de nascimento';\r\n\r\n\t\t\t\tif (!local) erros.local = 'Informe aqui o endereço';\r\n\t\t\t\tif (!numero) erros.numero = 'Informe aqui o numero';\r\n\t\t\t\tif (!bairro) erros.bairro = 'Informe aqui o bairro';\r\n\t\t\t\tif (!cidade) erros.cidade = 'Informe aqui a cidade';\r\n\t\t\t\tif (!estado) erros.estado = 'Informe aqui o estado';\r\n\t\t\t\tif (!CEP || CEP.length !== 9) erros.CEP = 'Informe aqui o CEP';\r\n\t\t\t\t\r\n\r\n\t\t        this.setState({ erros, aviso: null });\r\n\t\t\r\n\t\t                 \r\n\t\t          return Object.keys(erros).length === 0;\r\n\t\t\r\n                 \r\n\t  \r\n\t\t\r\n\t};\r\n\r\n\r\n\thandleSubmit() {\r\n\t\t\r\n\t\tconst { cliente, token } = this.props;\r\n\t\tif (!cliente || !token || !this.validate()) return null;\t\t\r\n\r\n\t\tthis.props.updateCliente(this.state, cliente._id, token, (error) => {\r\n\r\n\r\n\t\t\tif (error) this.setState({ aviso: { status:false, message: error.message } })\r\n\t\t\telse alert('Dados atualizados com sucesso!')\r\n\t\t} )\r\n\t};\r\n\r\n\tonChange = (field,valor) => this.setState({ [field]: valor}, ()=> this.validate())\r\n\r\n\trender() {\r\n\t\tconst { nome, cpf, telefone, dataDeNascimento, local,\r\n\t\t\tnumero, complemento, bairro, cidade, estado, CEP, erros } = this.state;\r\n\t\t\r\n\t\tconst { usuario } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<div className='flex-4 conteudo-area-cliente'>\r\n\t\t\t\t<h2>MEUS DADOS</h2>\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t<div className='form-dados'>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<TextoDados chave='E-mail' valor={usuario ? usuario.email : ''} />\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<FormSimples label='Nome' erro={erros.nome} onChange={(e) => this.onChange('nome', e.target.value)} value={nome} name='nome' type='text' placeholder='Nome' />\r\n\r\n\t\t\t\t\t<FormSimples\r\n\t\t\t\t\t\tlabel='CPF'\r\n\t\t\t\t\t\terro={erros.cpf}\r\n\t\t\t\t\t\tonChange={(e) => this.onChange('cpf', formatCPF(e.target.value))}\r\n\t\t\t\t\t\tvalue={cpf}\r\n\t\t\t\t\t\tname='cpf'\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tplaceholder='CPF'\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<div className='flex horizontal'>\r\n\t\t\t\t\t\t<div className='flex-1'>\r\n\t\t\t\t\t\t\t<FormSimples\r\n\t\t\t\t\t\t\t\terro={erros.telefone}\r\n\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('telefone', formatTelefone(e.target.value))}\r\n\t\t\t\t\t\t\t\tlabel='Telefone'\r\n\t\t\t\t\t\t\t\tvalue={telefone}\r\n\t\t\t\t\t\t\t\tname='telefone'\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tplaceholder='Telefone'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className='flex-1'>\r\n\t\t\t\t\t\t\t<FormSimples\r\n\t\t\t\t\t\t\t\terro={erros.dataDeNascimento}\r\n\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('dataDeNascimento', e.target.value)}\r\n\t\t\t\t\t\t\t\tvalue={dataDeNascimento}\r\n\t\t\t\t\t\t\t\tname='dataDeNascimento'\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tplaceholder='DD/MM/YYYY'\r\n\t\t\t\t\t\t\t\tlabel='Data de nascimento'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<div className='flex horizontal'>\r\n\t\t\t\t\t\t<div className='flex-3'>\r\n\t\t\t\t\t\t\t<FormSimples\r\n\t\t\t\t\t\t\t\tlabel='Local'\r\n\t\t\t\t\t\t\t\terro={erros.local}\r\n\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('local', e.target.value)}\r\n\t\t\t\t\t\t\t\tvalue={local}\r\n\t\t\t\t\t\t\t\tname='local'\r\n\t\t\t\t\t\t\t\tplaceholder='Endereço'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className='flex-1'>\r\n\t\t\t\t\t\t\t<FormSimples\r\n\t\t\t\t\t\t\t\tlabel='Número'\r\n\t\t\t\t\t\t\t\terro={erros.numero}\r\n\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('numero', formatNumber(e.target.value))}\r\n\t\t\t\t\t\t\t\tvalue={numero}\r\n\t\t\t\t\t\t\t\tname='numero'\r\n\t\t\t\t\t\t\t\tplaceholder='Número'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='flex horizontal'>\r\n\t\t\t\t\t\t<div className='flex-1'>\r\n\t\t\t\t\t\t\t<FormSimples\r\n\t\t\t\t\t\t\t\tlabel='Complemento'\r\n\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('complemento', e.target.value)}\r\n\t\t\t\t\t\t\t\tvalue={complemento}\r\n\t\t\t\t\t\t\t\tname='complemento'\r\n\t\t\t\t\t\t\t\tplaceholder='Complemento'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className='flex-1'>\r\n\t\t\t\t\t\t\t<FormSimples\r\n\t\t\t\t\t\t\t\tlabel='Bairro'\r\n\t\t\t\t\t\t\t\terro={erros.bairro}\r\n\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('bairro', e.target.value)}\r\n\t\t\t\t\t\t\t\tvalue={bairro}\r\n\t\t\t\t\t\t\t\tname='bairro'\r\n\t\t\t\t\t\t\t\tplaceholder='Bairro'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='flex horizontal'>\r\n\t\t\t\t\t\t<div className='flex-1'>\r\n\t\t\t\t\t\t\t<FormSimples\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\terro={erros.cidade}\r\n\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('cidade', e.target.value)}\r\n\t\t\t\t\t\t\t\tvalue={cidade}\r\n\t\t\t\t\t\t\t\tname='cidade'\r\n\t\t\t\t\t\t\t\tplaceholder='Cidade'\r\n\t\t\t\t\t\t\t\tlabel='Cidade'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='form-input'>\r\n\t\t\t\t\t\t\t<label>Estado</label>\r\n\t\t\t\t\t\t\t<select name='estado' value={estado} onChange={(e) => this.onChange('estado', e.target.value)}>\r\n\t\t\t\t\t\t\t\t<option>Selecione seu Estado</option>\r\n\t\t\t\t\t\t\t\t{Object.keys(ESTADOS).map((abbr) => (\r\n\t\t\t\t\t\t\t\t\t<option key={abbr} value={abbr}>\r\n\t\t\t\t\t\t\t\t\t\t{ESTADOS[abbr]}\r\n\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t{erros.estado && <small className='erro'>{erros.estado}</small>}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<FormSimples erro={erros.cep} onChange={(e) => this.onChange('cep', formatCEP(e.target.value))} value={CEP} name='CEP' placeholder='12345-789' label='CEP' />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<br />\r\n\t\t\t\t<AlertGeral aviso={this.state.aviso} />\r\n\r\n\t\t\t\t<div className='flex flex-start'>\r\n\t\t\t\t\t<button className='btn btn-primary' onClick={() => this.handleSubmit()}>\r\n\t\t\t\t\t\tSALVAR\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n\r\n\r\n\ttoken: state.auth.token,\r\n\tusuario: state.auth.usuario,\r\n\tcliente : state.cliente.cliente\r\n})\r\n\r\nexport default connect(mapStateToProps,actions)(FormularioDados);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAKA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AA8DA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA3DA;AAEA;AAAA;AAAA;AAAA;AAGA;AAKA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAGA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AAAA;AAGA;AAKA;AAAA;AAAA;AAAA;AAGA;AAEA;AAAA;AAAA;AACA;AAEA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAGA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AAEA;;;;A","sourceRoot":""}