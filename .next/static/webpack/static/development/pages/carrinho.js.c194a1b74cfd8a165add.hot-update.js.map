{"version":3,"file":"static/webpack/static\\development\\pages\\carrinho.js.c194a1b74cfd8a165add.hot-update.js","sources":["webpack:///./components/Item/Frete.js"],"sourcesContent":["/* modulo 42 - pagina de Carrinho - criando a estrutura da pagina e componentes 3/3 */\r\n\r\n\r\nimport React, { Component } from 'react';\r\n\r\n/*modulo 48 -  integrando a seçao de frete 1/2  */\r\n\r\n/*modulo 48 -  integrando a seçao de frete 2/2 */ \r\n\r\nimport { connect } from 'react-redux';\r\nimport actions from '../../redux/actions';\r\nimport { getCart } from '../../utils/cart';\r\nimport { formatMoney, codigosCorreios } from '../../utils';\r\nimport { formatCEP } from '../../utils/format';\r\n\r\nclass Frete extends Component {\r\n\tstate = { cep: this.props.cep || '' };\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (!prevProps.fretes && this.props.fretes && !this.props.freteSelecionado) {\r\n\t\t\tthis.props.selecionarFrete(this.props.fretes[0]);\r\n\t\t}\r\n\t}\r\n\r\n\tselectFrete(codigo, fretes) {\r\n\t\t\r\n\t\tconst frete = fretes.reduce((all, frete) => {\r\n\t\t\t\r\n              \r\n\t\t\tfrete.Codigo === codigo ? frete : all, {};\r\n\t\t});\r\n\r\n\t\tthis.props.selecionarFrete(frete)\r\n\t}\r\n\r\n\trenderOpcoesFrete() {\r\n\r\n\t\tconst { freteSelecionado, fretes } = this.props;\r\n\t\tif (!fretes) return null\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<select value={freteSelecionado.Codigo}\r\n\t\t\t\t\tonChange={(e)=> this.selectFrete(e.target.value,fretes)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfretes.map((frete, index) => {\r\n\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t<option value={frete.Codigo} key={frete.Codigo}>\r\n\t\t\t\t\t\t\t\t{codigosCorreios[frete.Codigo]} ({frete.PrazoEntrega} dias úteis) -\r\n\t\t\t\t\t\t\t\t{formatMoney(frete.Valor.replace(\",\",\".\"))}\r\n\t\t\t\t\t\t\t\t</option>;\r\n\r\n\t\t\t\t\t\t })\r\n\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderOpcaoSelecionada() {\r\n\r\n\t\tconst { freteSelecionado, cleanFretes } = this.props;\r\n\t\tif (!freteSelecionado) return null;\r\n\t\tconst valorFrete = freteSelecionado.valor.replace(\",\", \".\");\r\n\r\n \t\treturn (\r\n\t\t\t<div className='flex vertical flex-center'>\r\n\t\t\t\t\t<h4 className='valor-frete'>{formatMoney(valorFrete)}</h4>\r\n\t\t\t\t<span className='limpar-CEP'\r\n\t\t\t\t onClick={ ()=> cleanFretes()}>\r\n\t\t\t\t\tLimpar CEP\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tonChangeCEP = (e) => {\r\n\t\tthis.setState({ cep: formatCEP(e.target.value) });\r\n\t};\r\n\r\n\tcalcularFrete() {\r\n\t\t\r\n\t\tconst { cep } = thi.state;\r\n\t\tif (!cep || cep.length !== 9) return alert(\"Digite o CEP corretamente\");\r\n\t\tthis.props.calcularFrete(cep, getCart());\r\n\t}\r\n\r\n\trenderFormularioCEP() {\r\n\t\treturn (\r\n\t\t\t<div className='flex-1 flex'>\r\n\t\t\t\t<div className='flex-3'>\r\n\t\t\t\t\t<input value={this.state.cep} name='CEP' className='campo-frete' onChange={this.onChangeCEP} />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='flex-1'>\r\n\t\t\t\t\t<button className='btn btn-primary btn-sm' onClick={() => this.calcularFrete()}>\r\n\t\t\t\t\t\tCALCULAR\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className='dados-do-carrinho-item flex'>\r\n\t\t\t\t<div className='flex-1 flex vertical'>\r\n\t\t\t\t\t<p className='heardline'>Frete</p>\r\n\t\t\t\t\t{this.props.freteSelecionado && this.renderOpcoesFrete()}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='flex-1 flex flex-center'>{this.props.freteSelecionado ? this.renderOpcaoSelecionada() : this.renderFormularioCEP()}</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n\r\n\tcarrinho: state.carrinho.carrinho,\r\n\tfreteSelecionado: state.carrinho.freteSelecionado,\r\n\tfretes: state.carrinho.fretes,\r\n\tcep: state.carrinho.cep\r\n})\r\n\r\nexport default connect(mapStateToProps,actions)(Frete);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAgEA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AA9DA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAIA;AAGA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAEA;AAEA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAOA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAGA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAEA;;;;A","sourceRoot":""}