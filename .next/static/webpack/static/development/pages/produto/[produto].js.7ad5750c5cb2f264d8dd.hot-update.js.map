{"version":3,"file":"static/webpack/static\\development\\pages\\produto\\[produto].js.7ad5750c5cb2f264d8dd.hot-update.js","sources":["webpack:///./containers/Produto/Hero.js"],"sourcesContent":[" /* modulo 42 - paginas do produto -  criando base da pagina e inicio do Hero  */\r\n\r\n  /* modulo 42 - paginas do produto -  criando componente do hero do zero */\r\n\r\nimport React, { Component } from 'react';\r\n\r\n/*modulo 47 -  integrando o componente de Hero (1/2) */\r\n\r\n\r\nimport { connect } from 'react-redux';\r\n\r\nimport Link from 'next/link';\r\nimport { formatMoney } from '../../utils';\r\n\r\n\r\n/*modulo 47 -  integrando o componente de Hero (2/2) */\r\n\r\nimport { baseImg } from '../../config.js';\r\n\r\nclass Hero extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper();\r\n\t\tconst { produto, variacoes } = props;\r\n\t\tthis.state = {\r\n\t\t\tfoto: produto ? produto.fotos[0] || null : null,\r\n\t\t\tfotos: produto ? produto.fotos || null : null,\r\n\t\t\tqtd: 1,\r\n\t\t\tvariacao: variacoes && variacoes.length >= 1 ? variacoes[0]._id : null,\r\n\t\t\tvariacaoCompleta: variacoes && variacoes.length >= 1 ? variacoes[0] : null,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (!prevProps.produto && this.props.produto) {\r\n\t\t\tconst { fotos } = this.props.produto;\r\n\t\t\tthis.setState({ foto: fotos[0], fotos });\r\n\t\t}\r\n\r\n\t\tif (!prevProps.variacoes && this.props.variacoes) {\r\n\t\t\tconst variacao = this.props.variacoes[0];\r\n\t\t\tif (!variacao) return null;\r\n\t\t\tthis.setState({ variacao: variacao._id, variacaoCompleta: variacao });\r\n\t\t}\r\n\t}\r\n\r\n\trenderPhotos() {\r\n\t\treturn (\r\n\t\t\t<div className='fotos flex-2 flex vertical'>\r\n\t\t\t\t<div className='foto-principal flex-6 flex flex-center'>\r\n\t\t\t\t\t<img src={baseImg + this.state.foto} width='95%' />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='mini-fotos flex-1 flex'>\r\n\t\t\t\t\t{this.state.fotos.map((foto, index) => (\r\n\t\t\t\t\t\t<div key={index} className='mini-foto flex-1 flex flex-center' onClick={() => this.setState({ foto })}>\r\n\t\t\t\t\t\t\t<img src={baseImg + foto} width='90%' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\t/* modulo 47  -  integrando o componente de hero 2/2 */\r\n\r\n\t//addCart() {\r\n\t//\twindow.alert('adicionado ao carrinho');\r\n//\t}\r\n\t\r\n\taddCart() {\r\n\t\t \r\n\t\tconst { variacao, qtd, variacaoCompleta } = this.state;\r\n\t\tconst { produto } = this.produto;\r\n\t\taddCart({\r\n\t\t\t\r\n\t\t\tproduto: produto._id,\r\n\t\t\tvariacao,\r\n\t\t\tquantidade: qtd,\r\n\t\t\tprecoUnitario: variacaoCompleta ?\r\n\t\t\t\tvariacaoCompleta.promocao || variacaoCompleta.preco :\r\n\t\t\t\tproduto.promocao || produto.preco\r\n\t\t\t\t\r\n\t\t}, true);\r\n\t }\r\n\r\n\tsetVariacao = (produto, variacao) => {\r\n\t\tthis.setState({ variacao: variacao._id, variacaoCompleta: variacao });\r\n\t\tif (variacao.fotos && variacao.fotos.length > 0) {\r\n\t\t\tthis.setState({ fotos: variacao.fotos, foto: variacao.fotos[0] });\r\n\t\t} else {\r\n\t\t\tthis.setState({ fotos: produto.fotos, foto: produto.fotos[0] });\r\n\t\t}\r\n\t};\r\n\r\n\trenderVariacoes() {\r\n\t\tconst { variacoes, produto } = this.props;\r\n\r\n\r\n\t\tif (!produto || !variacoes || variacoes.length === 0) return null;\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label>Selecione uma op√ßao:</label>\r\n\t\t\t\t</div>\t\t\t\r\n\t\t\t\t<div className='variacoes flex wrap'>\r\n\t\t\t\t\t{variacoes.map((variacao, index) => (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={`variacao${variacao._id === this.state.variacao ? ' variacao-active' : ''}\r\n\t\t\t\t\t\t  flex-1 flex flex-center wrap-4`}\r\n\t\t\t\t\t\t\tkey={variacao._id}\r\n\t\t\t\t\t\t\tonClick={() => this.setVariacao(produto, variacao)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<span className='variacao-item'>{variacao.nome}</span>\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderDetalhes() {\r\n\t\tconst { produto } = this.props;\r\n\t\tconst { variacaoCompleta } = this.state;\r\n\r\n\t\tif (!produto) return null;\r\n\r\n\t\tconst temPromo = produto.promocao && produto.preco !== produto.promocao;\r\n\t\tconst temPromoVariacao = variacaoCompleta.promocao && variacaoCompleta.preco !== variacaoCompleta.promocao;\r\n\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className='flex-2 produto-detalhes'>\r\n\t\t\t\t<div className='titulo'>\r\n\t\t\t\t\t<h2>{produto.titulo}</h2>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='categoria'>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\tCategoria:&nbsp;\r\n\t\t\t\t\t\t<Link href={`/categoria/${produto.categoria.nome}?id=${produto.categoria._id}`}>\r\n\t\t\t\t\t\t\t<span className='categoria-link'>{produto.categoria.nome}</span>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<br />\r\n\t\t\t\t{variacaoCompleta ? (\r\n\t\t\t\t\t<div className='precos'>\r\n\t\t\t\t\t\t<h2 className={`preco-original ${temPromoVariacao ? 'preco-por' : 'teste'}`}>\r\n\t\t\t\t\t\t\t{formatMoney(variacaoCompleta.preco)}</h2>\r\n\r\n\t\t\t\t\t\t{variacaoCompleta.promocao && variacaoCompleta.promocao !== variacaoCompleta.preco && (\r\n\t\t\t\t\t\t\t<h2 className='preco-promocao'>{formatMoney(variacaoCompleta.promocao)}</h2>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{produto.parcelado && produto.parcelado > 2 && (\r\n\t\t\t\t\t\t\t<h4 className='preco-parcelado'>\r\n\t\t\t\t\t\t\t\tou {produto.parcelado.toString()} x de\r\n\t\t\t\t\t\t\t\t{formatMoney((variacaoCompleta.promocao || variacaoCompleta.preco) / produto.parcelado)} sem juros\r\n\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className='precos'>\r\n\t\t\t\t\t\t<h2 className={`preco-original ${temPromo ? 'preco-por' : ''}  `}>{formatMoney(produto.preco)}</h2>\r\n\r\n\t\t\t\t\t\t{produto.promocao && produto.promocao > 0 && produto.promocao !== produto.preco && <h2 className='preco-promocao'>{formatMoney(produto.promocao)}</h2>}\r\n\r\n\t\t\t\t\t\t{produto.parcelado && produto.parcelado > 2 && (\r\n\t\t\t\t\t\t\t<h4 className='preco-parcelado'>\r\n\t\t\t\t\t\t\t\tou {produto.parcelado.toString()} x de\r\n\t\t\t\t\t\t\t\t{formatMoney((produto.promocao || produto.preco) / produto.parcelado)} sem juros\r\n\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{/*\t\t\r\n\t\t\t\t\t   <h4 className='preco-parcelado'>\r\n\t\t\t\t\t\t  ou 6x de {formatMoney((produto.promocao || produto.preco) / 6 )} sem juros\r\n\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t*/}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{this.renderVariacoes()}\r\n\r\n\t\t\t\t<div className='opcoes'>\r\n\t\t\t\t\t<div className='opcao flex vertical'>\r\n\t\t\t\t\t\t<label className='opcao-tab'>Quantidade</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName='opcao-input'\r\n\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\tname='quantidade'\r\n\t\t\t\t\t\t\tvalue={this.state.qtd}\r\n\t\t\t\t\t\t\tonChange={(e) => Number(e.target.value) >= 1 && this.setState({ qtd: e.target.value })}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='comprar'>\r\n\t\t\t\t\t<button className='btn btn-success btn-cta' onClick={() => this.addCart()}>\r\n\t\t\t\t\t\tCOMPRAR\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className='Produto-Hero flex horizontal'>\r\n\t\t\t\t{this.renderPhotos()}\r\n\t\t\t\t{this.renderDetalhes()}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n\r\n\tproduto: state.produto.produto,\r\n\tvariacoes: state.produto.variacoes\r\n})\r\n\r\n\r\nexport default connect(mapStateToProps)(Hero)\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAiEA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAtEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAIA;AACA;AAAA;AAAA;AAAA;AAWA;AACA;AAAA;AAAA;AAGA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAIA;AAAA;AAEA;AACA;AACA;AAAA;AAGA;;;;A","sourceRoot":""}