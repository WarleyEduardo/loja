{"ast":null,"code":"/*modulo 49 - Criando as funções e error handlign para os dados do cliente 2/2*/\nimport { FETCH_CLIENTE, LOGOUT_CLIENTE } from '../types';\nimport axios from 'axios';\nimport { url, loja } from '../../config.js';\nimport { getHeaders } from './helpers';\n\n/*modulo 49 - Dados de entrega - criando funções e preparando a base */\n\n/*modulo 49 - submit dados do cliente - fazendo a integreção e ativando dados do cliente (2/2) */\n\nimport { autenticar, desautenticar } from './authActions';\nimport errorHandling from './errorHandling';\n\n/*Módulo 51 -  menu -  criando actionse reducers ...*/\nexport var logoutCliente = function logoutCliente() {\n  return function (dispatch) {\n    dispatch(desautenticar());\n    dispatch({\n      type: LOGOUT_CLIENTE\n    });\n  };\n};\nexport var getRawData = function getRawData(data) {\n  var _data = data.split('/');\n  var ano = _data[2];\n  var mes = _data[1];\n  var dia = _data[0];\n\n  //let _mes = _data[1];\n\n  //let mes = _mes < 10 ? \"0\" + _mes : _mes;\n\n  //let _dia = Number(_data[0]) + 1;\n\n  //let dia = _dia < 10 ? \"0\" + _dia : _dia;\n\n  return \"\".concat(ano, \"-\").concat(mes, \"-\").concat(dia);\n};\nexport var newCliente = function newCliente(form, cb) {\n  return function (dispatch) {\n    axios.post(\"\".concat(url, \"/api/clientes?loja=\").concat(loja), {\n      nome: form.nome,\n      password: form.senha,\n      cpf: form.cpf,\n      email: form.email,\n      telefones: [form.telefone],\n      endereco: {\n        local: form.local,\n        numero: form.numero,\n        complemento: form.complemento,\n        bairro: form.bairro,\n        cidade: form.cidade,\n        estado: form.estado,\n        CEP: form.CEP\n      },\n      dataDeNascimento: getRawData(form.dataDeNascimento)\n    }).then(function (response) {\n      dispatch({\n        type: FETCH_CLIENTE,\n        payload: response.data\n      });\n      dispatch(autenticar({\n        email: form.email,\n        password: form.senha\n      }, null, cb));\n      cb(null);\n    })[\"catch\"](function (e) {\n      return cb(errorHandling(e));\n    });\n  };\n};\nexport var updateCliente = function updateCliente(form, id, token, cb) {\n  return function (dispatch) {\n    axios.put(\"\".concat(url, \"/api/clientes/\").concat(id, \"?loja=\").concat(loja), {\n      nome: form.nome,\n      cpf: form.cpf,\n      telefones: [form.telefone],\n      endereco: {\n        local: form.local,\n        numero: form.numero,\n        complemento: form.complemento,\n        bairro: form.bairro,\n        cidade: form.cidade,\n        estado: form.estado,\n        CEP: form.CEP\n      },\n      dataDeNascimento: getRawData(form.dataDeNascimento)\n    }, getHeaders(token)).then(function (response) {\n      dispatch({\n        type: FETCH_CLIENTE,\n        payload: response.data\n      });\n      cb(null);\n    })[\"catch\"](function (e) {\n      return cb(errorHandling(e));\n    });\n  };\n};\nexport var fetchCliente = function fetchCliente(id, token) {\n  return function (dispatch) {\n    axios.get(\"\".concat(url, \"/api/clientes/\").concat(id, \"?loja=\").concat(loja), getHeaders(token)).then(function (response) {\n      dispatch({\n        type: FETCH_CLIENTE,\n        payload: response.data\n      });\n    })[\"catch\"](function (e) {\n      return console.log(e);\n    });\n  };\n};\nexport default {\n  fetchCliente: fetchCliente,\n  newCliente: newCliente,\n  updateCliente: updateCliente,\n  logoutCliente: logoutCliente\n};","map":{"version":3,"names":["FETCH_CLIENTE","LOGOUT_CLIENTE","axios","url","loja","getHeaders","autenticar","desautenticar","errorHandling","logoutCliente","dispatch","type","getRawData","data","_data","split","ano","mes","dia","newCliente","form","cb","post","nome","password","senha","cpf","email","telefones","telefone","endereco","local","numero","complemento","bairro","cidade","estado","CEP","dataDeNascimento","then","response","payload","e","updateCliente","id","token","put","fetchCliente","get","console","log"],"sources":["D:/javaScript/lojavirtual/lojavirtual/redux/actions/clienteActions.js"],"sourcesContent":["/*modulo 49 - Criando as funções e error handlign para os dados do cliente 2/2*/\r\nimport { FETCH_CLIENTE, LOGOUT_CLIENTE } from '../types';\r\n\r\nimport axios from 'axios';\r\nimport { url , loja} from '../../config.js';\r\nimport { getHeaders } from './helpers';\r\n\r\n/*modulo 49 - Dados de entrega - criando funções e preparando a base */\r\n\r\n/*modulo 49 - submit dados do cliente - fazendo a integreção e ativando dados do cliente (2/2) */\r\n\r\nimport { autenticar, desautenticar } from './authActions';\r\nimport errorHandling from './errorHandling';\r\n\r\n\r\n/*Módulo 51 -  menu -  criando actionse reducers ...*/\r\nexport const logoutCliente = () => dispatch => {\r\n\r\n\tdispatch(desautenticar());\r\n\tdispatch({type: LOGOUT_CLIENTE})\r\n}\r\n\r\nexport const getRawData = (data) => {\r\n\r\n\r\n\r\n\tlet _data = data.split('/');\t\r\n\r\n\tlet ano = _data[2];\r\n\tlet mes = _data[1]; \r\n\tlet dia = _data[0]; \r\n\r\n\t//let _mes = _data[1];\r\n\r\n\t//let mes = _mes < 10 ? \"0\" + _mes : _mes;\r\n\r\n\t//let _dia = Number(_data[0]) + 1;\r\n\r\n\t//let dia = _dia < 10 ? \"0\" + _dia : _dia;\r\n\r\n\treturn `${ano}-${mes}-${dia}`;\r\n}\r\n\r\n\r\nexport const newCliente = (form, cb) => (dispatch) => {\r\n\t\r\n\taxios.post(`${url}/api/clientes?loja=${loja}`, {\r\n\t\t\r\n\t\tnome: form.nome,\r\n\t\tpassword: form.senha,\r\n\t\tcpf: form.cpf,\r\n\t\temail: form.email,\r\n\t\ttelefones: [form.telefone],\r\n\t\tendereco: {\r\n\t\t\tlocal: form.local,\r\n\t\t\tnumero: form.numero,\r\n\t\t\tcomplemento: form.complemento,\r\n\t\t\tbairro: form.bairro,\r\n\t\t\tcidade: form.cidade,\r\n\t\t\testado: form.estado,\r\n\t\t\tCEP : form.CEP\r\n\t\t\t\r\n\t\t},\r\n\t\tdataDeNascimento : getRawData(form.dataDeNascimento)\r\n\t  }\r\n\t).then(\r\n\t\t(response) => {\t\t\r\n\t\t\tdispatch({ type: FETCH_CLIENTE, payload: response.data })\r\n\t\t\tdispatch(autenticar({ email: form.email, password: form.senha },null, cb))\r\n\t\t\tcb(null)\r\n\t\t}\r\n\t).catch(e => cb(errorHandling(e)));\r\n}\r\n\r\n\r\nexport const updateCliente = (form, id, token, cb) => (dispatch) => {\r\n\taxios.put(\r\n\t\t\t`${url}/api/clientes/${id}?loja=${loja}`,\r\n\t\t\t{\r\n\t\t\t\tnome: form.nome,\r\n\t\t\t\tcpf: form.cpf,\r\n\t\t\t\ttelefones: [form.telefone],\r\n\t\t\t\tendereco: {\r\n\t\t\t\t\tlocal: form.local,\r\n\t\t\t\t\tnumero: form.numero,\r\n\t\t\t\t\tcomplemento: form.complemento,\r\n\t\t\t\t\tbairro: form.bairro,\r\n\t\t\t\t\tcidade: form.cidade,\r\n\t\t\t\t\testado: form.estado,\r\n\t\t\t\t\tCEP: form.CEP,\r\n\t\t\t\t},\r\n\t\t\t\tdataDeNascimento: getRawData(form.dataDeNascimento),\r\n\t\t\t},\r\n\t\t\tgetHeaders(token)\r\n\t\t)\r\n\t\t.then((response) => {\r\n\t\t\tdispatch({ type: FETCH_CLIENTE, payload: response.data });\r\n\t\t\tcb(null);\r\n\t\t})\r\n\t\t.catch((e) => cb(errorHandling(e)));\r\n};\r\n\r\n\r\n\r\nexport const fetchCliente = (id, token) => dispatch => {\r\n\t\r\n\taxios.get(`${url}/api/clientes/${id}?loja=${loja}`, getHeaders(token))\r\n\t.then((response) => {\r\n\t  \r\n\t\tdispatch({type: FETCH_CLIENTE, payload : response.data})\r\n\r\n\t}).catch( e => console.log(e))\r\n};\r\n\r\nexport default {\r\n\tfetchCliente,\r\n\tnewCliente,\r\n\tupdateCliente,\r\n\tlogoutCliente,\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}