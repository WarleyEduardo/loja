{"ast":null,"code":"/* modulo 44 - Criando actions e reduces para integração 2/2*/\n\n/*modulo 46 - adicionando actions e reducers e alterando os componentes para integração*/\n\n/* modulo 47 -  integração -  detalhes do produto */\n\nimport axios from 'axios';\nimport { FETCH_PESQUISA, FETCH_PRODUTOS, FETCH_PRODUTOS_PESQUISA, FETCH_PRODUTO, FETCH_PRODUTO_VARIACOES, FETCH_PRODUTO_AVALIACOES } from '../types';\nimport { url, loja } from '../../config.js';\n\n/* modulo 47 - integrando o componente de avaliações 2/2 */\nimport { getHeaders } from './helpers';\nexport var fetchProdutosPaginaInicial = function fetchProdutosPaginaInicial() {\n  return function (dispatch) {\n    axios.get(\"\".concat(url, \"/api/produtos/disponiveis?loja=\").concat(loja, \"&offset=\", 0, \"&limit=\", 8, \"&sortType=\", \"preco-crescente\")).then(function (response) {\n      return dispatch({\n        type: FETCH_PRODUTOS,\n        payload: response.data\n      });\n    })[\"catch\"](function (e) {\n      return console.log(e);\n    });\n  };\n};\nexport var fetchTermo = function fetchTermo(termo) {\n  return {\n    type: FETCH_PESQUISA,\n    termo: termo\n  };\n};\nexport var fetchProdutosPesquisa = function fetchProdutosPesquisa(termo) {\n  var atual = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var limit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 20;\n  return function (dispatch) {\n    axios.get(\"\".concat(url, \"/api/produtos/search/\").concat(termo, \"?loja=\").concat(loja, \"&offset=\").concat(atual, \"&limit=\").concat(limit)).then(function (response) {\n      return dispatch({\n        type: FETCH_PRODUTOS_PESQUISA,\n        payload: response.data,\n        termo: termo\n      });\n    })[\"catch\"](function (e) {\n      return console.log(e);\n    });\n  };\n};\nexport var fetchProduto = function fetchProduto(id) {\n  return function (dispatch) {\n    axios.get(\"\".concat(url, \"/api/produtos/\").concat(id, \"?loja=\").concat(loja)).then(function (response) {\n      return dispatch({\n        type: FETCH_PRODUTO,\n        payload: response.data\n      });\n    })[\"catch\"](function (e) {\n      return console.log(e);\n    });\n  };\n};\nexport var fetchAvaliacoes = function fetchAvaliacoes(id) {\n  return function (dispatch) {\n    axios.get(\"\".concat(url, \"/api/produtos/\").concat(id, \"/avaliacoes?loja=\").concat(loja, \"&id=\").concat(id)).then(function (response) {\n      return dispatch({\n        type: FETCH_PRODUTO_AVALIACOES,\n        payload: response.data\n      });\n    })[\"catch\"](function (e) {\n      return console.log(e);\n    });\n  };\n};\nexport var fetchVariacoes = function fetchVariacoes(id) {\n  return function (dispatch) {\n    axios.get(\"\".concat(url, \"/api/produtos/\").concat(id, \"/variacoes?loja=\").concat(loja, \"&id=\").concat(id)).then(function (response) {\n      return dispatch({\n        type: FETCH_PRODUTO_VARIACOES,\n        payload: response.data\n      });\n    })[\"catch\"](function (e) {\n      return console.log(e);\n    });\n  };\n};\n\n/* modulo 47 - integrando o componente de avaliações 2/2 */\n\nexport var novaAvaliacao = ({\n  nome: nome,\n  token: token,\n  produto: produto,\n  texto: texto,\n  pontuacao: pontuacao\n}, function (cb) {\n  axios.post(\"\".concat(url, \"/api/avaliacoes?loja=\").concat(loja, \"&produto=\").concat(produto), {\n    nome: nome,\n    texto: texto,\n    pontuacao: pontuacao\n  }, getHeaders(token)).then(function (response) {\n    dispatch({\n      type: NOVA_AVALIACAO,\n      payload: response.data\n    });\n    cb(null);\n  })[\"catch\"](function (e) {\n    return cb(e);\n  });\n});\nexport default {\n  fetchProdutosPaginaInicial: fetchProdutosPaginaInicial,\n  fetchTermo: fetchTermo,\n  fetchProdutosPesquisa: fetchProdutosPesquisa,\n  fetchProduto: fetchProduto,\n  fetchAvaliacoes: fetchAvaliacoes,\n  fetchVariacoes: fetchVariacoes,\n  novaAvaliacao: novaAvaliacao\n};","map":{"version":3,"names":["axios","FETCH_PESQUISA","FETCH_PRODUTOS","FETCH_PRODUTOS_PESQUISA","FETCH_PRODUTO","FETCH_PRODUTO_VARIACOES","FETCH_PRODUTO_AVALIACOES","url","loja","getHeaders","fetchProdutosPaginaInicial","dispatch","get","then","response","type","payload","data","e","console","log","fetchTermo","termo","fetchProdutosPesquisa","atual","limit","fetchProduto","id","fetchAvaliacoes","fetchVariacoes","novaAvaliacao","nome","token","produto","texto","pontuacao","cb","post","NOVA_AVALIACAO"],"sources":["D:/javaScript/lojavirtual/lojavirtual/redux/actions/produtoActions.js"],"sourcesContent":["/* modulo 44 - Criando actions e reduces para integração 2/2*/\r\n\r\n/*modulo 46 - adicionando actions e reducers e alterando os componentes para integração*/\r\n\r\n/* modulo 47 -  integração -  detalhes do produto */\r\n\r\n\r\n\r\nimport axios from 'axios';\r\n\r\nimport {\r\n\tFETCH_PESQUISA,\r\n\tFETCH_PRODUTOS,\r\n\tFETCH_PRODUTOS_PESQUISA,\r\n\tFETCH_PRODUTO,\r\n\tFETCH_PRODUTO_VARIACOES,\r\n\tFETCH_PRODUTO_AVALIACOES\r\n} from '../types';\r\n\r\nimport { url, loja } from '../../config.js';\r\n\r\n/* modulo 47 - integrando o componente de avaliações 2/2 */\r\nimport { getHeaders } from './helpers';\r\n\r\n\r\nexport const fetchProdutosPaginaInicial = () => (dispatch) => {\r\n\r\n\taxios.get(`${url}/api/produtos/disponiveis?loja=${loja}&offset=${0}&limit=${8}&sortType=${\"preco-crescente\"}`)\r\n\t\t.then((response) => dispatch({ type: FETCH_PRODUTOS, payload: response.data }))\r\n\t.catch(e => console.log(e))\r\n};\r\n\r\nexport const fetchTermo = (termo) => ({ type: FETCH_PESQUISA, termo })\r\n\r\n\r\nexport const fetchProdutosPesquisa = (termo,atual=0,limit = 20) => (dispatch) => {\r\n\taxios\r\n\t\t.get(`${url}/api/produtos/search/${termo}?loja=${loja}&offset=${atual}&limit=${limit}`)\r\n\t\t.then((response) => dispatch({ type: FETCH_PRODUTOS_PESQUISA, payload: response.data , termo }))\r\n\t\t.catch((e) => console.log(e));\r\n};\r\n\r\n\r\n\r\nexport const fetchProduto = (id) =>\r\n\t(dispatch) => {\r\n\t\taxios\r\n\t\t\t.get(`${url}/api/produtos/${id}?loja=${loja}`)\r\n\t\t\t.then((response) => dispatch({ type: FETCH_PRODUTO, payload: response.data}))\r\n\t\t\t.catch((e) => console.log(e));\r\n\t};\r\n\r\n\r\nexport const fetchAvaliacoes = (id) => (dispatch) => {\r\n\taxios\r\n\t\t.get(`${url}/api/produtos/${id}/avaliacoes?loja=${loja}&id=${id}`)\r\n\t\t.then((response) => dispatch({ type: FETCH_PRODUTO_AVALIACOES, payload: response.data}))\r\n\t\t.catch((e) => console.log(e));\r\n};\t\r\n\r\nexport const fetchVariacoes = (id) => (dispatch) => {\r\n\taxios\r\n\t\t.get(`${url}/api/produtos/${id}/variacoes?loja=${loja}&id=${id}`)\r\n\t\t.then((response) => dispatch({ type: FETCH_PRODUTO_VARIACOES, payload: response.data}))\r\n\t\t.catch((e) => console.log(e));\r\n};\t\r\n\r\n/* modulo 47 - integrando o componente de avaliações 2/2 */\r\n\r\nexport const novaAvaliacao = ({ nome, token, produto, texto, pontuacao }, cb => {\r\n\t\r\n\taxios.post(\r\n\t\t`${url}/api/avaliacoes?loja=${loja}&produto=${produto}`,\r\n\t\t{\r\n\t\t\tnome,\r\n\t\t\ttexto,\r\n\t\t\tpontuacao,\r\n\t\t},\r\n\t\tgetHeaders(token)\r\n\t).then(response => {\r\n\t\tdispatch({ type: NOVA_AVALIACAO, payload: response.data });\r\n\t\tcb(null)\r\n\t})\r\n\t.catch( e => cb(e))\r\n} )\r\n\r\nexport default {\r\n\tfetchProdutosPaginaInicial,\r\n\tfetchTermo,\r\n\tfetchProdutosPesquisa,\r\n\tfetchProduto,\r\n\tfetchAvaliacoes,\r\n\tfetchVariacoes,\r\n\tnovaAvaliacao,\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}