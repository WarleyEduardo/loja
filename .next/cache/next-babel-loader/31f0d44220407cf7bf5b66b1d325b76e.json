{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\n/*loja virtual - integração carrinho - preparando o arquivo cart.js */\n\nimport Router from 'next/router';\nvar _saveCart = function _saveCart(item) {\n  console.log(item);\n  var cart = getCart();\n  var found;\n  cart = cart.map(function (_item) {\n    if (_item.produto === item.produto && _item.variacao === item.variacao) {\n      found = true;\n      return _objectSpread({}, item, {\n        quantidade: Number(_item.quantidade) + Number(item.quantidade)\n      });\n    } else {\n      return _item;\n    }\n  });\n  if (!found) cart.push(item);\n  localStorage.setItem(\"@cart\", _JSON$stringify(cart));\n};\nexport var getCart = function getCart() {\n  return JSON.parse(localStorage.getItem(\"@cart\") || \"[]\");\n};\nexport var cleanCart = function cleanCart() {\n  return localStorage.removeItem(\"@cart\");\n};\nexport var addCart = function addCart(item) {\n  var goToCart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  _saveCart(item);\n  if (goToCart) Router.push(\"/carrinho\");\n};\nexport var getCountItemsCart = function getCountItemsCart() {\n  return getCart().reduce(function (c, _ref) {\n    var quantidade = _ref.quantidade;\n    return c + (Number(quantidade) || 1);\n  }, 0);\n};\nexport var removeCart = function removeCart(index) {\n  var cart = getCart();\n  cart = cart.reduce(function (all, item, _index) {\n    return index !== _index ? all.concat([item]) : all;\n  }, []);\n  localStorage.setItem(\"@cart\", _JSON$stringify(cart));\n};\nexport default {\n  getCart: getCart,\n  addCart: addCart,\n  cleanCart: cleanCart,\n  getCountItemsCart: getCountItemsCart,\n  removeCart: removeCart\n};","map":{"version":3,"names":["Router","_saveCart","item","console","log","cart","getCart","found","map","_item","produto","variacao","quantidade","Number","push","localStorage","setItem","JSON","parse","getItem","cleanCart","removeItem","addCart","goToCart","getCountItemsCart","reduce","c","removeCart","index","all","_index","concat"],"sources":["D:/javaScript/lojavirtual/lojavirtual/utils/cart.js"],"sourcesContent":["/*loja virtual - integração carrinho - preparando o arquivo cart.js */\r\n\r\nimport Router from 'next/router';\r\n\r\n\r\nconst _saveCart = (item) => {\r\n\r\n\tconsole.log(item)\r\n\tlet cart = getCart();\r\n\tlet found;\r\n\r\n\tcart = cart.map((_item) => {\r\n\t\t\r\n\t\tif (_item.produto === item.produto &&\r\n\t\t\t_item.variacao === item.variacao\r\n\t\t) {\r\n\t\t\t\r\n\t\t\tfound = true;\r\n\t\t\treturn { ...item, quantidade: Number(_item.quantidade) + Number(item.quantidade) };\r\n\t\t} else {\r\n\t\t\treturn _item;\r\n\t\t}\r\n\t});\r\n\r\n\tif (!found) cart.push(item);\r\n\r\n\tlocalStorage.setItem(\"@cart\",JSON.stringify(cart))\r\n}\r\n\r\n\r\n\r\nexport const getCart = () => JSON.parse(localStorage.getItem(\"@cart\") || \"[]\");\r\n\r\nexport const cleanCart = () => localStorage.removeItem(\"@cart\");\r\n\r\nexport const addCart = (item, goToCart = true) => {\r\n\t_saveCart(item);\r\n\tif (goToCart) Router.push(\"/carrinho\")\r\n};\r\n\r\nexport const getCountItemsCart = () => getCart().reduce((c, { quantidade }) => c + (Number(quantidade) || 1), 0);\r\n\r\nexport const removeCart = (index) => {\r\n\tlet cart = getCart();\r\n\t\r\n\tcart = cart.reduce((all, item, _index) => index !== _index ? all.concat([item]) : all, []);\r\n\t\r\n\tlocalStorage.setItem(\"@cart\", JSON.stringify(cart));\r\n\r\n\r\n};\r\n\r\nexport default {\r\n\r\n\tgetCart,\r\n\taddCart,\r\n\tcleanCart,\r\n\tgetCountItemsCart,\r\n\tremoveCart\r\n}"],"mappings":";;AAAA;;AAEA,OAAOA,MAAM,MAAM,aAAa;AAGhC,IAAMC,SAAS,GAAG,SAAZA,SAAS,CAAIC,IAAI,EAAK;EAE3BC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;EACjB,IAAIG,IAAI,GAAGC,OAAO,EAAE;EACpB,IAAIC,KAAK;EAETF,IAAI,GAAGA,IAAI,CAACG,GAAG,CAAC,UAACC,KAAK,EAAK;IAE1B,IAAIA,KAAK,CAACC,OAAO,KAAKR,IAAI,CAACQ,OAAO,IACjCD,KAAK,CAACE,QAAQ,KAAKT,IAAI,CAACS,QAAQ,EAC/B;MAEDJ,KAAK,GAAG,IAAI;MACZ,yBAAYL,IAAI;QAAEU,UAAU,EAAEC,MAAM,CAACJ,KAAK,CAACG,UAAU,CAAC,GAAGC,MAAM,CAACX,IAAI,CAACU,UAAU;MAAC;IACjF,CAAC,MAAM;MACN,OAAOH,KAAK;IACb;EACD,CAAC,CAAC;EAEF,IAAI,CAACF,KAAK,EAAEF,IAAI,CAACS,IAAI,CAACZ,IAAI,CAAC;EAE3Ba,YAAY,CAACC,OAAO,CAAC,OAAO,EAAC,gBAAeX,IAAI,CAAC,CAAC;AACnD,CAAC;AAID,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAO;EAAA,OAASW,IAAI,CAACC,KAAK,CAACH,YAAY,CAACI,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC;AAAA;AAE9E,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAS;EAAA,OAASL,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC;AAAA;AAE/D,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAO,CAAIpB,IAAI,EAAsB;EAAA,IAApBqB,QAAQ,uEAAG,IAAI;EAC5CtB,SAAS,CAACC,IAAI,CAAC;EACf,IAAIqB,QAAQ,EAAEvB,MAAM,CAACc,IAAI,CAAC,WAAW,CAAC;AACvC,CAAC;AAED,OAAO,IAAMU,iBAAiB,GAAG,SAApBA,iBAAiB;EAAA,OAASlB,OAAO,EAAE,CAACmB,MAAM,CAAC,UAACC,CAAC;IAAA,IAAId,UAAU,QAAVA,UAAU;IAAA,OAAOc,CAAC,IAAIb,MAAM,CAACD,UAAU,CAAC,IAAI,CAAC,CAAC;EAAA,GAAE,CAAC,CAAC;AAAA;AAEhH,OAAO,IAAMe,UAAU,GAAG,SAAbA,UAAU,CAAIC,KAAK,EAAK;EACpC,IAAIvB,IAAI,GAAGC,OAAO,EAAE;EAEpBD,IAAI,GAAGA,IAAI,CAACoB,MAAM,CAAC,UAACI,GAAG,EAAE3B,IAAI,EAAE4B,MAAM;IAAA,OAAKF,KAAK,KAAKE,MAAM,GAAGD,GAAG,CAACE,MAAM,CAAC,CAAC7B,IAAI,CAAC,CAAC,GAAG2B,GAAG;EAAA,GAAE,EAAE,CAAC;EAE1Fd,YAAY,CAACC,OAAO,CAAC,OAAO,EAAE,gBAAeX,IAAI,CAAC,CAAC;AAGpD,CAAC;AAED,eAAe;EAEdC,OAAO,EAAPA,OAAO;EACPgB,OAAO,EAAPA,OAAO;EACPF,SAAS,EAATA,SAAS;EACTI,iBAAiB,EAAjBA,iBAAiB;EACjBG,UAAU,EAAVA;AACD,CAAC"},"metadata":{},"sourceType":"module"}