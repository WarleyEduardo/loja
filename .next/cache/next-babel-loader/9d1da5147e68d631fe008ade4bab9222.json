{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\n/*modulo 49 - integração checkout - desenvolvendo o container dos dados do cliente */\n\nimport { SET_FORM, CLEAN_FORM, SET_TIPO_PAGAMENTO, FETCH_SESSION_ID, FETCH_SENDER_HASH } from '../types';\n\n/* módulo 49 -  Dados de pagamento - preparando a base, actions e  funções do pagseguro */\nimport axios from 'axios';\nimport { url, loja } from '../../config';\nimport { getCart } from '../../utils/cart';\n\n/*modulo 49 - Botão final de checkout -  preprando base , actions e reducers */\n\nexport var novoPedido = function novoPedido(form, freteSelecionado, tipoPagamentoSelecionado, valorTotal, token, senderHash) {\n  var carrinho = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : getCard();\n  var cb = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n  return function (dispatch) {};\n};\nexport var cleanForm = function cleanForm() {\n  return {\n    type: CLEAN_FORM\n  };\n};\nexport var setTipoPagamento = function setTipoPagamento(tipoPagamentoSelecionado) {\n  return {\n    type: SET_TIPO_PAGAMENTO,\n    tipoPagamentoSelecionado: tipoPagamentoSelecionado\n  };\n};\nexport var getSessionPagamento = function getSessionPagamento() {\n  return function (dispatch) {\n    axios.get(\"\".concat(url, \"/api/pagamentos/session\")).then(function (response) {\n      dispatch({\n        type: FETCH_SESSION_ID,\n        payload: response.data\n      });\n      PagSeguroDirectPayment.setSessionId(response.data.sessionId);\n      var senderHash = PagSeguroDirectPayment.getSenderHash();\n      /*\r\n      PagSeguroDirectPayment.onSenderHashReady((response) => {\r\n      \tif (response.status == 'error') {\r\n      \t\tconsole.log(response.message);\r\n      \t\treturn false;\r\n      \t}\r\n      \t console.log(response.senderHash);\r\n      \t\r\n      }\r\n      );\r\n      */\n\n      dispatch({\n        type: FETCH_SENDER_HASH,\n        senderHash: senderHash\n      });\n    })[\"catch\"](function (e) {\n      return console.log(e);\n    });\n  };\n};\nexport var setForm = function setForm(payload, prefix) {\n  return function (dispatch) {\n    dispatch({\n      type: SET_FORM,\n      payload: payload,\n      prefix: prefix\n    });\n    return _Promise.resolve();\n  };\n};\nexport default {\n  setForm: setForm,\n  getSessionPagamento: getSessionPagamento,\n  setTipoPagamento: setTipoPagamento,\n  cleanForm: cleanForm\n};","map":{"version":3,"names":["SET_FORM","CLEAN_FORM","SET_TIPO_PAGAMENTO","FETCH_SESSION_ID","FETCH_SENDER_HASH","axios","url","loja","getCart","novoPedido","form","freteSelecionado","tipoPagamentoSelecionado","valorTotal","token","senderHash","carrinho","getCard","cb","dispatch","cleanForm","type","setTipoPagamento","getSessionPagamento","get","then","response","payload","data","PagSeguroDirectPayment","setSessionId","sessionId","getSenderHash","e","console","log","setForm","prefix","resolve"],"sources":["D:/javaScript/lojavirtual/lojavirtual/redux/actions/checkoutActions.js"],"sourcesContent":["/*modulo 49 - integração checkout - desenvolvendo o container dos dados do cliente */\r\n\r\nimport { SET_FORM, CLEAN_FORM, SET_TIPO_PAGAMENTO, FETCH_SESSION_ID, FETCH_SENDER_HASH } from '../types';\r\n\r\n/* módulo 49 -  Dados de pagamento - preparando a base, actions e  funções do pagseguro */\r\nimport axios from 'axios';\r\nimport { url , loja } from '../../config'\r\n\r\nimport { getCart } from '../../utils/cart';\r\n\r\n/*modulo 49 - Botão final de checkout -  preprando base , actions e reducers */\r\n\r\nexport const novoPedido = (form, freteSelecionado, tipoPagamentoSelecionado,\r\n valorTotal, token, senderHash, carrinho = getCard() , cb = null\r\n\r\n) => dispatch => {\r\n\r\n\r\n}\r\n\r\nexport const cleanForm = () => ({ type: CLEAN_FORM })\r\n\r\nexport const setTipoPagamento = (tipoPagamentoSelecionado) => ({\r\n\r\n\ttype: SET_TIPO_PAGAMENTO, tipoPagamentoSelecionado\r\n});\r\n\r\nexport const getSessionPagamento = () => dispatch => {\r\n\t\r\n\taxios.get(`${url}/api/pagamentos/session`).then((response) => {\r\n\r\n\t\tdispatch({ type: FETCH_SESSION_ID, payload: response.data });\r\n\r\n\t\tPagSeguroDirectPayment.setSessionId(response.data.sessionId);\r\n\r\n\t\tlet senderHash = PagSeguroDirectPayment.getSenderHash();\r\n\t\t/*\r\n\t\tPagSeguroDirectPayment.onSenderHashReady((response) => {\r\n\t\t\tif (response.status == 'error') {\r\n\t\t\t\tconsole.log(response.message);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t console.log(response.senderHash);\r\n\t\t\t\r\n\t\t}\r\n\t\t);\r\n\t\t*/\r\n\t\t\r\n\t\tdispatch({ type: FETCH_SENDER_HASH, senderHash });\r\n\t}).catch( e => console.log(e)) \t\r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport const setForm = (payload, prefix) => dispatch => {\r\n\r\n\tdispatch({ type: SET_FORM, payload, prefix });\r\n\r\n\treturn Promise.resolve();\r\n};\r\n\r\nexport default {\r\n\tsetForm,\r\n\tgetSessionPagamento,\r\n\tsetTipoPagamento,\r\n\tcleanForm\r\n};"],"mappings":";AAAA;;AAEA,SAASA,QAAQ,EAAEC,UAAU,EAAEC,kBAAkB,EAAEC,gBAAgB,EAAEC,iBAAiB,QAAQ,UAAU;;AAExG;AACA,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,GAAG,EAAGC,IAAI,QAAQ,cAAc;AAEzC,SAASC,OAAO,QAAQ,kBAAkB;;AAE1C;;AAEA,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAU,CAAIC,IAAI,EAAEC,gBAAgB,EAAEC,wBAAwB,EAC1EC,UAAU,EAAEC,KAAK,EAAEC,UAAU;EAAA,IAAEC,QAAQ,uEAAGC,OAAO,EAAE;EAAA,IAAGC,EAAE,uEAAG,IAAI;EAAA,OAE3D,UAAAC,QAAQ,EAAI,CAGjB,CAAC;AAAA;AAED,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAS;EAAA,OAAU;IAAEC,IAAI,EAAEpB;EAAW,CAAC;AAAA,CAAC;AAErD,OAAO,IAAMqB,gBAAgB,GAAG,SAAnBA,gBAAgB,CAAIV,wBAAwB;EAAA,OAAM;IAE9DS,IAAI,EAAEnB,kBAAkB;IAAEU,wBAAwB,EAAxBA;EAC3B,CAAC;AAAA,CAAC;AAEF,OAAO,IAAMW,mBAAmB,GAAG,SAAtBA,mBAAmB;EAAA,OAAS,UAAAJ,QAAQ,EAAI;IAEpDd,KAAK,CAACmB,GAAG,WAAIlB,GAAG,6BAA0B,CAACmB,IAAI,CAAC,UAACC,QAAQ,EAAK;MAE7DP,QAAQ,CAAC;QAAEE,IAAI,EAAElB,gBAAgB;QAAEwB,OAAO,EAAED,QAAQ,CAACE;MAAK,CAAC,CAAC;MAE5DC,sBAAsB,CAACC,YAAY,CAACJ,QAAQ,CAACE,IAAI,CAACG,SAAS,CAAC;MAE5D,IAAIhB,UAAU,GAAGc,sBAAsB,CAACG,aAAa,EAAE;MACvD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;MAEEb,QAAQ,CAAC;QAAEE,IAAI,EAAEjB,iBAAiB;QAAEW,UAAU,EAAVA;MAAW,CAAC,CAAC;IAClD,CAAC,CAAC,SAAM,CAAE,UAAAkB,CAAC;MAAA,OAAIC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;IAAA,EAAC;EAE/B,CAAC;AAAA;AAKD,OAAO,IAAMG,OAAO,GAAG,SAAVA,OAAO,CAAIT,OAAO,EAAEU,MAAM;EAAA,OAAK,UAAAlB,QAAQ,EAAI;IAEvDA,QAAQ,CAAC;MAAEE,IAAI,EAAErB,QAAQ;MAAE2B,OAAO,EAAPA,OAAO;MAAEU,MAAM,EAANA;IAAO,CAAC,CAAC;IAE7C,OAAO,SAAQC,OAAO,EAAE;EACzB,CAAC;AAAA;AAED,eAAe;EACdF,OAAO,EAAPA,OAAO;EACPb,mBAAmB,EAAnBA,mBAAmB;EACnBD,gBAAgB,EAAhBA,gBAAgB;EAChBF,SAAS,EAATA;AACD,CAAC"},"metadata":{},"sourceType":"module"}